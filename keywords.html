<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å…¨æ™¯å…³é”®è¯ - å­¦æœ¯å‘¨æŠ¥</title>
    <style>
        /* åŸºç¡€é¡µé¢ç¾åŒ– */
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f4f8; /* åŒ¹é…ä¸»é¡µçš„æ·¡é›…èƒŒæ™¯è‰² */
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            text-align: center;
        }

        /* æ ‡é¢˜æ ·å¼ */
        h1 {
            font-size: 2.5rem;
            font-weight: bold;
            color: #1e3a8a; /* æ·±è“è‰²ï¼Œæ›´å…·ç§‘æŠ€æ„Ÿ */
            margin-bottom: 10px;
        }

        p {
            color: #4b5563;
            margin-bottom: 30px;
        }

        /* ç”»å¸ƒå®¹å™¨ï¼Œç”¨äºæ§åˆ¶è¯äº‘å¤§å°å’Œä½ç½® */
        #myCanvasContainer {
            width: 90%;
            max-width: 800px; /* é™åˆ¶æœ€å¤§å®½åº¦ */
            margin: 0 auto;
        }

        /* è¯äº‘ç”»å¸ƒ */
        #myCanvas {
            width: 100%;
            height: 100%;
        }
        
        /* è¿”å›é“¾æ¥æ ·å¼ */
        .back-link {
            margin-top: 30px;
            text-decoration: none;
            color: #2563eb;
            font-weight: bold;
            transition: color 0.2s;
        }
        .back-link:hover {
            color: #1d4ed8;
        }
    </style>
</head>
<body>
    <h1>ğŸ“š å…¨æ™¯å…³é”®è¯</h1>
    <p>ï¼ˆç»Ÿè®¡æ‰€æœ‰å·²æŠ“å–è®ºæ–‡ä¸­çš„å…³é”®è¯å‡ºç°é¢‘ç‡ï¼Œä¾›å‚è€ƒï¼‰</p>

    <div id="myCanvasContainer">
        <canvas width="800" height="600" id="myCanvas">
            <p>æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒHTML5çš„canvasæ ‡ç­¾ã€‚</p>
        </canvas>
    </div>

    <ul id="tags" style="display: none;">
        </ul>

    <a href="index.html" class="back-link">â† è¿”å›é¦–é¡µ</a>

    <script src="https://www.goat1000.com/tagcanvas.min.js" type="text/javascript"></script>
    <script>
        window.onload = function() {
            // ä»JSONæ–‡ä»¶è·å–å…³é”®è¯æ•°æ®
            fetch('keywords_full.json')
                .then(response => response.json())
                .then(data => {
                    const tagsUl = document.getElementById('tags');
                    
                    if (data.length === 0) {
                         document.getElementById('myCanvasContainer').innerText = 'æš‚æ— å…³é”®è¯æ•°æ®ã€‚';
                         return;
                    }

                    // åŠ¨æ€è®¡ç®—å­—ä½“å¤§å°èŒƒå›´
                    const counts = data.map(item => item.count);
                    const minCount = Math.min(...counts);
                    const maxCount = Math.max(...counts);
                    const minFontSize = 12; // æœ€å°å­—ä½“
                    const maxFontSize = 40; // æœ€å¤§å­—ä½“

                    data.forEach(item => {
                        const li = document.createElement('li');
                        const a = document.createElement('a');
                        
                        // æ ¹æ®è¯é¢‘è®¡ç®—å­—ä½“å¤§å°ï¼Œå®ç°é¢‘ç‡è¶Šé«˜ã€å­—ä½“è¶Šå¤§çš„æ•ˆæœ
                        let fontSize = minFontSize;
                        if (maxCount > minCount) {
                            fontSize = minFontSize + ((item.count - minCount) / (maxCount - minCount)) * (maxFontSize - minFontSize);
                        } else if (data.length > 0) {
                            fontSize = (minFontSize + maxFontSize) / 2;
                        }
                        
                        a.href = "#"; // é“¾æ¥å¯ä»¥ç•™ç©º
                        a.innerText = item.keyword;
                        a.style.fontSize = `${fontSize}px`; // TagCanvas ä¼šåˆ©ç”¨è¿™ä¸ªå­—ä½“å¤§å°
                        a.title = `å‡ºç° ${item.count} æ¬¡`; // é¼ æ ‡æ‚¬åœæ—¶æ˜¾ç¤ºæ¬¡æ•°
                        
                        li.appendChild(a);
                        tagsUl.appendChild(li);
                    });

                    // æ•°æ®åŠ è½½å®Œæˆåï¼Œå¯åŠ¨TagCanvas
                    try {
                        TagCanvas.Start('myCanvas', 'tags', {
                            textColour: '#1e3a8a', // æ ‡ç­¾æ–‡å­—é¢œè‰²
                            outlineColour: '#60a5fa', // æ ‡ç­¾è½®å»“é¢œè‰²ï¼ˆå‘å…‰æ•ˆæœï¼‰
                            reverse: true,
                            depth: 0.8,
                            maxSpeed: 0.05,
                            weight: true, // å¼€å¯æƒé‡æ¨¡å¼ï¼Œè®©å­—ä½“å¤§å°ç”Ÿæ•ˆ
                            weightMode: 'size',
                            tooltip: 'title' // ä½¿ç”¨aæ ‡ç­¾çš„titleä½œä¸ºæ‚¬æµ®æç¤º
                        });
                    } catch(e) {
                        // å¦‚æœå‡ºé”™ï¼Œéšè—ç”»å¸ƒå¹¶æ˜¾ç¤ºé”™è¯¯ä¿¡æ¯
                        document.getElementById('myCanvasContainer').style.display = 'none';
                        console.error('TagCanvas failed to start:', e);
                    }
                })
                .catch(error => {
                    document.getElementById('myCanvasContainer').innerText = 'âŒ åŠ è½½å…³é”®è¯å¤±è´¥: ' + error;
                    console.error('Error fetching keywords:', error);
                });
        };
    </script>
</body>
</html>